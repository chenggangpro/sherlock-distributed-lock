apply plugin: 'signing'
apply plugin: 'io.codearte.nexus-staging'

signing {
  sign configurations.archives
}

nexusStaging {
  packageGroup = "com.coditory"
  stagingProfileId = "365d557aaf167c"
}

// Don't publish the default jar for the root project
// and other not publishable modules
configurations.archives.artifacts.clear()
subprojects
    .findAll { notPublishableModules.contains(it.path) }
    .each { subproject ->
      configurations.archives.artifacts.clear()
    }

if (project.hasProperty('mavenCentral')) {
  subprojects
      .findAll { !notPublishableModules.contains(it.path) }
      .each { subproject ->
        subproject.apply from: "${rootDir}/gradle/publish-project.gradle"
      }
}
